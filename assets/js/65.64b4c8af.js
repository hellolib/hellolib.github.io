(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{384:function(t,s,a){"use strict";a.r(s);var n=a(3),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"前戏-链接-基础概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前戏-链接-基础概念"}},[t._v("#")]),t._v(" 前戏：”链接“基础概念")]),t._v(" "),s("ul",[s("li",[t._v("参考文章：http://blog.champbay.com/2019/11/25/%e9%9d%99%e6%80%81%e9%93%be%e6%8e%a5%e5%8a%a8%e6%80%81%e9%93%be%e6%8e%a5%e9%9d%99%e6%80%81%e5%ba%93%e5%85%b1%e4%ba%ab%e5%ba%93%e8%bf%99%e4%ba%9b%e6%a6%82%e5%bf%b5%e7%9a%84%e8%af%a6%e8%a7%a3/")])]),t._v(" "),s("h2",{attrs:{id:"ldflags-用于链接过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ldflags-用于链接过程"}},[t._v("#")]),t._v(" ldflags 用于链接过程")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("通过命令"),s("code",[t._v("go tool dist list")]),t._v("查看go支持的平台：")]),t._v(" "),s("div",{staticClass:"language-go line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("aix"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ppc64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" android"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("386")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" android"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" android"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" android"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" darwin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" darwin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dragonfly"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" freebsd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("386")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" freebsd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" freebsd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" freebsd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" illumos"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ios"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ios"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" js"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("wasm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("386")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mips"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mips64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mips64le"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mipsle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ppc64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ppc64le"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("riscv64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" linux"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("s390x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" netbsd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("386")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" netbsd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" netbsd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" netbsd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" openbsd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("386")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" openbsd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" openbsd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" openbsd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" openbsd"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mips64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" plan9"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("386")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" plan9"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" plan9"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" solaris"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" windows"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("386")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" windows"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" windows"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" windows"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("arm64\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("大佬的文章： https://tonybai.com/2017/06/27/an-intro-about-go-portability/")])])]),t._v(" "),s("h2",{attrs:{id:"配置go应用和变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置go应用和变量"}},[t._v("#")]),t._v(" 配置go应用和变量")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("参数")]),t._v(" "),s("ul",[s("li",[t._v("-w 去掉调试信息")]),t._v(" "),s("li",[t._v("-s 去掉符号表")]),t._v(" "),s("li",[t._v("-X 注入变量, 编译时赋值")])])]),t._v(" "),s("li",[s("p",[t._v("使用范围：go install 、go build、go run 、go test")])]),t._v(" "),s("li",[s("p",[t._v("编译")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("'${GO_PATH}/main.go'")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("package main\nvar B int\nfunc main(){\n\tfmt.Println(B)\n}\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("编译 "),s("code",[t._v("go build -ldflags '-w -s -X ${GO_PATH}/main.B=100' -o main main.go")])])]),t._v(" "),s("li",[s("p",[t._v("运行二进制文件输出：100")])])])]),t._v(" "),s("li",[s("p",[t._v("使用变量")]),t._v(" "),s("div",{staticClass:"language-go line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("Module"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pubgo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xxx\nGOPATH"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("shell "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" env GOPATH"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nVersion"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("shell git tag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("sort"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("committerdate "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" tail "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("n "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nGoVersion"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("shell "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nBuildTime"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("shell date "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"+%F %T"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nCommitID"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("shell git rev"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("parse HEAD"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nLDFLAGS"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v('ldflags "'),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("X 'github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pubgo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xxx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GoVersion"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("GoVersion"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("' \\\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("X 'github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pubgo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xxx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BuildTime"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("BuildTime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("' \\\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("X 'github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pubgo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xxx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GoPath"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("GOPATH"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("' \\\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("X 'github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pubgo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xxx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CommitID"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("CommitID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("' \\\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("X 'github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pubgo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xxx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Module"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("' \\\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("X 'github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pubgo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xxx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("'\"\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// go build ${LDFLAGS} -mod vendor -race -v -o main main.go")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);