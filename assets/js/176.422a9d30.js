(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{497:function(t,_,i){"use strict";i.r(_);var v=i(3),l=Object(v.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"执行计划"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#执行计划"}},[t._v("#")]),t._v(" 执行计划")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("实际过程中，可能会出现其他的索引失效场景，这时我们就需要查看执行计划，通过执行计划显示的数据判断查询语句是否使用了索引。")])]),t._v(" "),_("li",[_("p",[t._v("如下图，就是一个没有使用索引，并且是一个全表扫描的查询语句。")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://raw.githubusercontent.com/hellolib/pictures/main/Typora/pic-00-gitee/20220623173626.png",alt:"image-20220623171408876"}})])]),t._v(" "),_("li",[_("p",[t._v("对于执行计划，参数有：")])]),t._v(" "),_("li",[_("ul",[_("li",[_("p",[_("strong",[t._v("partitions")]),t._v(" 表分区")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("possible_keys")]),t._v(" 字段表示可能用到的索引；")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("key")]),t._v(" 字段表示实际用的索引，如果这一项为 NULL，说明没有使用索引；")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("key_len")]),t._v(" 表示索引的长度；")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("rows")]),t._v(" 表示扫描的数据行数。")])]),t._v(" "),_("li",[_("p",[_("strong",[t._v("type")]),t._v(" 表示数据扫描类型，我们需要重点看这个。")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("type 字段就是描述了找到所需数据时使用的扫描方式是什么，常见扫描类型的"),_("strong",[t._v("执行效率从低到高的顺序为")]),t._v("：")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("ALL（全表扫描）；")])]),t._v(" "),_("li",[_("p",[t._v("index（全索引扫描）；")])]),t._v(" "),_("li",[_("p",[t._v("range（索引范围扫描）；")])]),t._v(" "),_("li",[_("p",[t._v("ref（非唯一索引扫描）；")])]),t._v(" "),_("li",[_("p",[t._v("eq_ref（唯一索引扫描）；")])]),t._v(" "),_("li",[_("p",[t._v("const（结果只有一条的主键或唯一索引扫描）。")])])])])])])])]),t._v(" "),_("li",[_("p",[t._v("考虑到查询效率问题，全表扫描和全索引扫描要尽量避免。")])]),t._v(" "),_("li",[_("p",[t._v("执行计划任务列\n"),_("img",{attrs:{src:"https://raw.githubusercontent.com/hellolib/pictures/main/Typora/pic-00-gitee/image-20220613201329515.png",alt:"image-20220613201329515"}})])])])])}),[],!1,null,null,null);_.default=l.exports}}]);