<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DRF 版本、认证、权限、限制、解析器和渲染器 | 刘沙河</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="stylesheet" href="/iconfont/font_3077305_pt8umhrn4k9.css">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="go语言博客,个人技术博客,后端,后端开发,go框架,后端面试题,技术文档,学习,面试,Go,go,Golang,golang,python,Python,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.bc45a961.css" as="style"><link rel="preload" href="/assets/js/app.a4b4c4d6.js" as="script"><link rel="preload" href="/assets/js/2.175b47d8.js" as="script"><link rel="preload" href="/assets/js/146.73948f4b.js" as="script"><link rel="preload" href="/assets/js/6.a6a5cbc6.js" as="script"><link rel="prefetch" href="/assets/js/10.d2a2006e.js"><link rel="prefetch" href="/assets/js/100.4514377e.js"><link rel="prefetch" href="/assets/js/101.c517501c.js"><link rel="prefetch" href="/assets/js/102.61d4c520.js"><link rel="prefetch" href="/assets/js/103.88eaaea1.js"><link rel="prefetch" href="/assets/js/104.78c0a555.js"><link rel="prefetch" href="/assets/js/105.a7e953bc.js"><link rel="prefetch" href="/assets/js/106.78dbbdf8.js"><link rel="prefetch" href="/assets/js/107.565cb803.js"><link rel="prefetch" href="/assets/js/108.9c17227c.js"><link rel="prefetch" href="/assets/js/109.264e2457.js"><link rel="prefetch" href="/assets/js/11.e6ab1323.js"><link rel="prefetch" href="/assets/js/110.2e758bdf.js"><link rel="prefetch" href="/assets/js/111.ca6741e6.js"><link rel="prefetch" href="/assets/js/112.a52484f2.js"><link rel="prefetch" href="/assets/js/113.629ffb47.js"><link rel="prefetch" href="/assets/js/114.0799e6c0.js"><link rel="prefetch" href="/assets/js/115.3da91837.js"><link rel="prefetch" href="/assets/js/116.a04f8dfd.js"><link rel="prefetch" href="/assets/js/117.7d46d1f0.js"><link rel="prefetch" href="/assets/js/118.e6eb8550.js"><link rel="prefetch" href="/assets/js/119.96445058.js"><link rel="prefetch" href="/assets/js/12.b4bb7273.js"><link rel="prefetch" href="/assets/js/120.145adbd9.js"><link rel="prefetch" href="/assets/js/121.97d4517b.js"><link rel="prefetch" href="/assets/js/122.9811901f.js"><link rel="prefetch" href="/assets/js/123.6a1a9f90.js"><link rel="prefetch" href="/assets/js/124.e9438b7d.js"><link rel="prefetch" href="/assets/js/125.7a611d8d.js"><link rel="prefetch" href="/assets/js/126.78068f21.js"><link rel="prefetch" href="/assets/js/127.a990c35c.js"><link rel="prefetch" href="/assets/js/128.fe20a142.js"><link rel="prefetch" href="/assets/js/129.2bdfbd9c.js"><link rel="prefetch" href="/assets/js/13.9b47eae4.js"><link rel="prefetch" href="/assets/js/130.d27623f1.js"><link rel="prefetch" href="/assets/js/131.be798fd2.js"><link rel="prefetch" href="/assets/js/132.b0c06ca8.js"><link rel="prefetch" href="/assets/js/133.8836092b.js"><link rel="prefetch" href="/assets/js/134.040ed2bc.js"><link rel="prefetch" href="/assets/js/135.c4e4cfe6.js"><link rel="prefetch" href="/assets/js/136.39276bb8.js"><link rel="prefetch" href="/assets/js/137.8174453a.js"><link rel="prefetch" href="/assets/js/138.77923b91.js"><link rel="prefetch" href="/assets/js/139.76bd7848.js"><link rel="prefetch" href="/assets/js/14.8661fc92.js"><link rel="prefetch" href="/assets/js/140.2848b075.js"><link rel="prefetch" href="/assets/js/141.69c0f14f.js"><link rel="prefetch" href="/assets/js/142.e6c076ad.js"><link rel="prefetch" href="/assets/js/143.355867cf.js"><link rel="prefetch" href="/assets/js/144.a5a873b3.js"><link rel="prefetch" href="/assets/js/145.24b884f0.js"><link rel="prefetch" href="/assets/js/147.fde6865a.js"><link rel="prefetch" href="/assets/js/148.3f0abf9c.js"><link rel="prefetch" href="/assets/js/149.cd27a38f.js"><link rel="prefetch" href="/assets/js/15.54a85059.js"><link rel="prefetch" href="/assets/js/150.962b8cef.js"><link rel="prefetch" href="/assets/js/151.e2b539be.js"><link rel="prefetch" href="/assets/js/152.a8e0d81b.js"><link rel="prefetch" href="/assets/js/153.ff156b07.js"><link rel="prefetch" href="/assets/js/154.60b1e2bb.js"><link rel="prefetch" href="/assets/js/155.443e5f04.js"><link rel="prefetch" href="/assets/js/156.81aea40b.js"><link rel="prefetch" href="/assets/js/157.127436ad.js"><link rel="prefetch" href="/assets/js/158.88e7a03f.js"><link rel="prefetch" href="/assets/js/159.269c8e7e.js"><link rel="prefetch" href="/assets/js/16.1bb6eaff.js"><link rel="prefetch" href="/assets/js/160.e8d6b4c9.js"><link rel="prefetch" href="/assets/js/161.7571e679.js"><link rel="prefetch" href="/assets/js/162.132cd95e.js"><link rel="prefetch" href="/assets/js/163.afa0338f.js"><link rel="prefetch" href="/assets/js/164.2d515528.js"><link rel="prefetch" href="/assets/js/165.9ed24024.js"><link rel="prefetch" href="/assets/js/166.ff49740a.js"><link rel="prefetch" href="/assets/js/167.242d0dc2.js"><link rel="prefetch" href="/assets/js/168.d9ca3970.js"><link rel="prefetch" href="/assets/js/169.aeb05a03.js"><link rel="prefetch" href="/assets/js/17.65398ebe.js"><link rel="prefetch" href="/assets/js/170.e8efe234.js"><link rel="prefetch" href="/assets/js/171.b8bfc61a.js"><link rel="prefetch" href="/assets/js/172.8caf9373.js"><link rel="prefetch" href="/assets/js/173.146bfc28.js"><link rel="prefetch" href="/assets/js/174.5455aa7b.js"><link rel="prefetch" href="/assets/js/175.2eabed59.js"><link rel="prefetch" href="/assets/js/176.422a9d30.js"><link rel="prefetch" href="/assets/js/177.d7007fdc.js"><link rel="prefetch" href="/assets/js/178.711020a6.js"><link rel="prefetch" href="/assets/js/179.ce2ae712.js"><link rel="prefetch" href="/assets/js/18.3b799c40.js"><link rel="prefetch" href="/assets/js/180.c14f784e.js"><link rel="prefetch" href="/assets/js/181.1d917f62.js"><link rel="prefetch" href="/assets/js/182.0aaeaf90.js"><link rel="prefetch" href="/assets/js/183.f8a32be5.js"><link rel="prefetch" href="/assets/js/184.6ca4c1f2.js"><link rel="prefetch" href="/assets/js/185.12a4c113.js"><link rel="prefetch" href="/assets/js/186.2e0e4262.js"><link rel="prefetch" href="/assets/js/187.6fa8f1a4.js"><link rel="prefetch" href="/assets/js/188.53b3ff4d.js"><link rel="prefetch" href="/assets/js/189.4edd16bf.js"><link rel="prefetch" href="/assets/js/19.e7a1faeb.js"><link rel="prefetch" href="/assets/js/190.00d16fcd.js"><link rel="prefetch" href="/assets/js/191.02ea1782.js"><link rel="prefetch" href="/assets/js/192.8fde0195.js"><link rel="prefetch" href="/assets/js/193.671a5680.js"><link rel="prefetch" href="/assets/js/194.5f168a97.js"><link rel="prefetch" href="/assets/js/195.df9b0912.js"><link rel="prefetch" href="/assets/js/196.cbc3e789.js"><link rel="prefetch" href="/assets/js/197.95f4efd5.js"><link rel="prefetch" href="/assets/js/198.311a687d.js"><link rel="prefetch" href="/assets/js/199.a20e87af.js"><link rel="prefetch" href="/assets/js/20.64af1b37.js"><link rel="prefetch" href="/assets/js/200.aa836830.js"><link rel="prefetch" href="/assets/js/201.7c2bcbb2.js"><link rel="prefetch" href="/assets/js/202.b4b41e58.js"><link rel="prefetch" href="/assets/js/203.aa4ecc1c.js"><link rel="prefetch" href="/assets/js/204.e10ab51a.js"><link rel="prefetch" href="/assets/js/205.a74f8f34.js"><link rel="prefetch" href="/assets/js/206.dfa2d631.js"><link rel="prefetch" href="/assets/js/207.92034ec8.js"><link rel="prefetch" href="/assets/js/208.7e0bfc36.js"><link rel="prefetch" href="/assets/js/209.baca5c2c.js"><link rel="prefetch" href="/assets/js/21.ca06ca3a.js"><link rel="prefetch" href="/assets/js/210.0db033ea.js"><link rel="prefetch" href="/assets/js/211.bfc05b61.js"><link rel="prefetch" href="/assets/js/212.1e019ea0.js"><link rel="prefetch" href="/assets/js/213.3affa094.js"><link rel="prefetch" href="/assets/js/214.556ccb98.js"><link rel="prefetch" href="/assets/js/215.da8dafd9.js"><link rel="prefetch" href="/assets/js/216.f0cc8743.js"><link rel="prefetch" href="/assets/js/217.280d2690.js"><link rel="prefetch" href="/assets/js/218.02c2fe5e.js"><link rel="prefetch" href="/assets/js/219.e8ba7706.js"><link rel="prefetch" href="/assets/js/22.d1963d60.js"><link rel="prefetch" href="/assets/js/220.6f42c0a3.js"><link rel="prefetch" href="/assets/js/221.62528fff.js"><link rel="prefetch" href="/assets/js/222.71ea3335.js"><link rel="prefetch" href="/assets/js/223.5a8df61a.js"><link rel="prefetch" href="/assets/js/224.3807dca3.js"><link rel="prefetch" href="/assets/js/225.59018f24.js"><link rel="prefetch" href="/assets/js/226.d36ce618.js"><link rel="prefetch" href="/assets/js/227.0db1f329.js"><link rel="prefetch" href="/assets/js/228.8f4566eb.js"><link rel="prefetch" href="/assets/js/229.3432fc2f.js"><link rel="prefetch" href="/assets/js/23.e4676f8a.js"><link rel="prefetch" href="/assets/js/230.17b8c87c.js"><link rel="prefetch" href="/assets/js/231.734d0a1e.js"><link rel="prefetch" href="/assets/js/232.5fb56712.js"><link rel="prefetch" href="/assets/js/233.5670fcca.js"><link rel="prefetch" href="/assets/js/234.03d01394.js"><link rel="prefetch" href="/assets/js/235.3907f048.js"><link rel="prefetch" href="/assets/js/236.88837bb2.js"><link rel="prefetch" href="/assets/js/237.9994c3ac.js"><link rel="prefetch" href="/assets/js/238.5bb5fc81.js"><link rel="prefetch" href="/assets/js/239.19b2724a.js"><link rel="prefetch" href="/assets/js/24.9c2ebb5d.js"><link rel="prefetch" href="/assets/js/240.c6179f5a.js"><link rel="prefetch" href="/assets/js/241.3eb546fd.js"><link rel="prefetch" href="/assets/js/242.d6c09cac.js"><link rel="prefetch" href="/assets/js/243.db9dafb0.js"><link rel="prefetch" href="/assets/js/244.d457e04f.js"><link rel="prefetch" href="/assets/js/245.0b53b4bf.js"><link rel="prefetch" href="/assets/js/246.70df42c8.js"><link rel="prefetch" href="/assets/js/247.70082681.js"><link rel="prefetch" href="/assets/js/248.dbd07d8d.js"><link rel="prefetch" href="/assets/js/249.2e61051e.js"><link rel="prefetch" href="/assets/js/25.a398b380.js"><link rel="prefetch" href="/assets/js/250.9f088d8e.js"><link rel="prefetch" href="/assets/js/251.66416892.js"><link rel="prefetch" href="/assets/js/252.1032d5a0.js"><link rel="prefetch" href="/assets/js/253.67b50cd4.js"><link rel="prefetch" href="/assets/js/254.310baa8b.js"><link rel="prefetch" href="/assets/js/255.ac2aab59.js"><link rel="prefetch" href="/assets/js/256.8a273de3.js"><link rel="prefetch" href="/assets/js/257.1afcf7d0.js"><link rel="prefetch" href="/assets/js/258.476ba2d7.js"><link rel="prefetch" href="/assets/js/259.432aedd7.js"><link rel="prefetch" href="/assets/js/26.5a935d19.js"><link rel="prefetch" href="/assets/js/260.eb12f280.js"><link rel="prefetch" href="/assets/js/261.de533b5a.js"><link rel="prefetch" href="/assets/js/262.53a85593.js"><link rel="prefetch" href="/assets/js/263.74ba80d8.js"><link rel="prefetch" href="/assets/js/264.a0b290e9.js"><link rel="prefetch" href="/assets/js/265.01f00d05.js"><link rel="prefetch" href="/assets/js/266.8a6bfbf4.js"><link rel="prefetch" href="/assets/js/267.bccd6d79.js"><link rel="prefetch" href="/assets/js/268.5eeeb455.js"><link rel="prefetch" href="/assets/js/269.bde7a11d.js"><link rel="prefetch" href="/assets/js/27.2e8e9a53.js"><link rel="prefetch" href="/assets/js/270.20ada417.js"><link rel="prefetch" href="/assets/js/271.9d8c2822.js"><link rel="prefetch" href="/assets/js/272.5262232f.js"><link rel="prefetch" href="/assets/js/273.ad62f3a8.js"><link rel="prefetch" href="/assets/js/274.bf1fdf4d.js"><link rel="prefetch" href="/assets/js/275.2c0b781a.js"><link rel="prefetch" href="/assets/js/276.7d8ba1c7.js"><link rel="prefetch" href="/assets/js/277.27493d9d.js"><link rel="prefetch" href="/assets/js/278.c3817595.js"><link rel="prefetch" href="/assets/js/279.fedd34b4.js"><link rel="prefetch" href="/assets/js/28.a6ee73ff.js"><link rel="prefetch" href="/assets/js/280.26205ec7.js"><link rel="prefetch" href="/assets/js/281.6e925efa.js"><link rel="prefetch" href="/assets/js/282.54606710.js"><link rel="prefetch" href="/assets/js/283.76dd02b4.js"><link rel="prefetch" href="/assets/js/284.e258a70b.js"><link rel="prefetch" href="/assets/js/285.c80d6f9d.js"><link rel="prefetch" href="/assets/js/286.60af59df.js"><link rel="prefetch" href="/assets/js/287.afd4f167.js"><link rel="prefetch" href="/assets/js/288.380c6268.js"><link rel="prefetch" href="/assets/js/289.27548631.js"><link rel="prefetch" href="/assets/js/29.d607601b.js"><link rel="prefetch" href="/assets/js/290.3e53b7b9.js"><link rel="prefetch" href="/assets/js/291.a5ac273f.js"><link rel="prefetch" href="/assets/js/292.1efff40c.js"><link rel="prefetch" href="/assets/js/293.f7d00829.js"><link rel="prefetch" href="/assets/js/294.5d36123e.js"><link rel="prefetch" href="/assets/js/295.9c58488a.js"><link rel="prefetch" href="/assets/js/296.e778c7f3.js"><link rel="prefetch" href="/assets/js/297.6e8c12e8.js"><link rel="prefetch" href="/assets/js/298.5dbe5ad9.js"><link rel="prefetch" href="/assets/js/299.b33879b1.js"><link rel="prefetch" href="/assets/js/3.e52400fb.js"><link rel="prefetch" href="/assets/js/30.af10be0a.js"><link rel="prefetch" href="/assets/js/31.a64e3186.js"><link rel="prefetch" href="/assets/js/32.b568d881.js"><link rel="prefetch" href="/assets/js/33.7e3efd9c.js"><link rel="prefetch" href="/assets/js/34.d5f718a3.js"><link rel="prefetch" href="/assets/js/35.e594f942.js"><link rel="prefetch" href="/assets/js/36.23ba3575.js"><link rel="prefetch" href="/assets/js/37.d056b124.js"><link rel="prefetch" href="/assets/js/38.78376eb9.js"><link rel="prefetch" href="/assets/js/39.c06ca3d2.js"><link rel="prefetch" href="/assets/js/4.2c8dcdaf.js"><link rel="prefetch" href="/assets/js/40.78d6e29d.js"><link rel="prefetch" href="/assets/js/41.15307b1b.js"><link rel="prefetch" href="/assets/js/42.5d955991.js"><link rel="prefetch" href="/assets/js/43.64255dd9.js"><link rel="prefetch" href="/assets/js/44.fc7b38a6.js"><link rel="prefetch" href="/assets/js/45.b3f9ef0f.js"><link rel="prefetch" href="/assets/js/46.3039beb5.js"><link rel="prefetch" href="/assets/js/47.c59c98f6.js"><link rel="prefetch" href="/assets/js/48.e0ffe856.js"><link rel="prefetch" href="/assets/js/49.7bd30518.js"><link rel="prefetch" href="/assets/js/5.12d9e187.js"><link rel="prefetch" href="/assets/js/50.6d607770.js"><link rel="prefetch" href="/assets/js/51.eef57cca.js"><link rel="prefetch" href="/assets/js/52.d6cb8e6b.js"><link rel="prefetch" href="/assets/js/53.05197d56.js"><link rel="prefetch" href="/assets/js/54.b659ece8.js"><link rel="prefetch" href="/assets/js/55.cf131eb7.js"><link rel="prefetch" href="/assets/js/56.0202deb0.js"><link rel="prefetch" href="/assets/js/57.9e0df991.js"><link rel="prefetch" href="/assets/js/58.64377322.js"><link rel="prefetch" href="/assets/js/59.f8a4b99f.js"><link rel="prefetch" href="/assets/js/60.5a27bedd.js"><link rel="prefetch" href="/assets/js/61.9e5573b6.js"><link rel="prefetch" href="/assets/js/62.5804bee4.js"><link rel="prefetch" href="/assets/js/63.df3be798.js"><link rel="prefetch" href="/assets/js/64.3b2879c5.js"><link rel="prefetch" href="/assets/js/65.64b4c8af.js"><link rel="prefetch" href="/assets/js/66.1ba238bd.js"><link rel="prefetch" href="/assets/js/67.db89278d.js"><link rel="prefetch" href="/assets/js/68.ee39b329.js"><link rel="prefetch" href="/assets/js/69.5456f0f2.js"><link rel="prefetch" href="/assets/js/7.f85f0eba.js"><link rel="prefetch" href="/assets/js/70.aaaf4c0d.js"><link rel="prefetch" href="/assets/js/71.2f29f5d1.js"><link rel="prefetch" href="/assets/js/72.0f367d2a.js"><link rel="prefetch" href="/assets/js/73.7bbdfce7.js"><link rel="prefetch" href="/assets/js/74.354d9873.js"><link rel="prefetch" href="/assets/js/75.ef54202b.js"><link rel="prefetch" href="/assets/js/76.7f051a65.js"><link rel="prefetch" href="/assets/js/77.9070573b.js"><link rel="prefetch" href="/assets/js/78.604ed03b.js"><link rel="prefetch" href="/assets/js/79.2bbfa98b.js"><link rel="prefetch" href="/assets/js/8.a3dc8598.js"><link rel="prefetch" href="/assets/js/80.51f5c9dc.js"><link rel="prefetch" href="/assets/js/81.de12f9a4.js"><link rel="prefetch" href="/assets/js/82.9212da9a.js"><link rel="prefetch" href="/assets/js/83.da9aa600.js"><link rel="prefetch" href="/assets/js/84.6a07a3a3.js"><link rel="prefetch" href="/assets/js/85.cef47f90.js"><link rel="prefetch" href="/assets/js/86.b4d16f50.js"><link rel="prefetch" href="/assets/js/87.0ee31906.js"><link rel="prefetch" href="/assets/js/88.b4aaaaf0.js"><link rel="prefetch" href="/assets/js/89.f1a21e87.js"><link rel="prefetch" href="/assets/js/9.b1a30078.js"><link rel="prefetch" href="/assets/js/90.9201e1e6.js"><link rel="prefetch" href="/assets/js/91.f53d4040.js"><link rel="prefetch" href="/assets/js/92.a7ef970c.js"><link rel="prefetch" href="/assets/js/93.34d3a239.js"><link rel="prefetch" href="/assets/js/94.c71695f2.js"><link rel="prefetch" href="/assets/js/95.3e514df9.js"><link rel="prefetch" href="/assets/js/96.b6a5635d.js"><link rel="prefetch" href="/assets/js/97.1f01c813.js"><link rel="prefetch" href="/assets/js/98.290036ad.js"><link rel="prefetch" href="/assets/js/99.e3471891.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bc45a961.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="刘沙河" class="logo"> <span class="site-name can-hide">刘沙河</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Go" class="dropdown-title"><a href="/go/" class="link-title">Go</a> <span class="title" style="display:none;">Go</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Go语言基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/dfa8c5/" class="nav-link">数据类型</a></li><li class="dropdown-subitem"><a href="/pages/5f1127/" class="nav-link">反射</a></li><li class="dropdown-subitem"><a href="/pages/c49433/" class="nav-link">Go指针</a></li></ul></li><li class="dropdown-item"><h4>Go语言进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/cf7dae/" class="nav-link">go泛型</a></li><li class="dropdown-subitem"><a href="/pages/dedafd/" class="nav-link">go条件编译</a></li><li class="dropdown-subitem"><a href="/pages/efc7ad/" class="nav-link">cgo教程</a></li><li class="dropdown-subitem"><a href="/pages/6bedb1/" class="nav-link">Go协程调度原理及GPM模型</a></li><li class="dropdown-subitem"><a href="/pages/0a62de/" class="nav-link">Go内存管理</a></li><li class="dropdown-subitem"><a href="/pages/241eea/" class="nav-link">Go垃圾回收机制</a></li><li class="dropdown-subitem"><a href="/pages/034686/" class="nav-link">Go语言内存对齐</a></li></ul></li><li class="dropdown-item"><h4>Go语言实现原理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1068be/" class="nav-link">channel 实现原理</a></li><li class="dropdown-subitem"><a href="/pages/99be2b/" class="nav-link">slice 实现原理</a></li><li class="dropdown-subitem"><a href="/pages/d185ed/" class="nav-link">map 实现原理</a></li><li class="dropdown-subitem"><a href="/pages/9ab782/" class="nav-link">sync.Mutex 实现原理</a></li><li class="dropdown-subitem"><a href="/pages/f2d80d/" class="nav-link">乐观锁CAS 实现原理</a></li><li class="dropdown-subitem"><a href="/pages/4f0a6e/" class="nav-link">singlefight 实现原理</a></li></ul></li><li class="dropdown-item"><h4>gin框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/39fbb0/" class="nav-link">gin中间件原理</a></li><li class="dropdown-subitem"><a href="/pages/7e7998/" class="nav-link">gin路由原理</a></li></ul></li><li class="dropdown-item"><h4>gorm</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b1bd04/" class="nav-link">GORM介绍和使用</a></li><li class="dropdown-subitem"><a href="/pages/0f644f/" class="nav-link">GORM_CURD操作指南</a></li></ul></li><li class="dropdown-item"><h4>go测试</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/147dd1/" class="nav-link">benchmark基准测试</a></li><li class="dropdown-subitem"><a href="/pages/d45236/" class="nav-link">pprof 性能分析</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>python进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3b62b2/" class="nav-link">Numpy&amp;Pandas</a></li><li class="dropdown-subitem"><a href="/pages/cffbfd/" class="nav-link">celery分布式任务队列</a></li></ul></li><li class="dropdown-item"><h4>Django</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3c6d02/" class="nav-link">Django 常见命令</a></li><li class="dropdown-subitem"><a href="/pages/ac3065/" class="nav-link">middleware中间件</a></li><li class="dropdown-subitem"><a href="/pages/f4f9ce/" class="nav-link">Django缓存系统</a></li><li class="dropdown-subitem"><a href="/pages/96c912/" class="nav-link">Django信号系统</a></li><li class="dropdown-subitem"><a href="/pages/a0cd2a/" class="nav-link">Django REST Framework</a></li></ul></li><li class="dropdown-item"><h4>Flask</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/cbe9ba/" class="nav-link">Flask基础知识总结</a></li><li class="dropdown-subitem"><a href="/pages/184ee5/" class="nav-link">Flask-SQLAlchemy</a></li></ul></li><li class="dropdown-item"><h4>爬虫</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5ef8dd/" class="nav-link">aiohttp</a></li><li class="dropdown-subitem"><a href="/pages/e669a5/" class="nav-link">scrapy框架</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/database/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Mysql</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/508485/" class="nav-link">Mysql存储引擎和索引</a></li><li class="dropdown-subitem"><a href="/pages/a65b61/" class="nav-link">MySQL主从复制</a></li><li class="dropdown-subitem"><a href="/pages/10af64/" class="nav-link">Mysql读写分离</a></li><li class="dropdown-subitem"><a href="/pages/64593f/" class="nav-link">数据库分库分表</a></li><li class="dropdown-subitem"><a href="/pages/bfd481/" class="nav-link">Mysql锁</a></li><li class="dropdown-subitem"><a href="/pages/00c19f/" class="nav-link">Mysql事务和MVCC原理</a></li><li class="dropdown-subitem"><a href="/pages/af218c/" class="nav-link">分库分表带来的读扩散问题</a></li></ul></li><li class="dropdown-item"><h4>Redis</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5665df/" class="nav-link">redis基础和数据类型</a></li><li class="dropdown-subitem"><a href="/pages/d17810/" class="nav-link">redis主从架构</a></li><li class="dropdown-subitem"><a href="/pages/c1b6e9/" class="nav-link">redis哨兵架构</a></li><li class="dropdown-subitem"><a href="/pages/b05ef8/" class="nav-link">redis集群模式</a></li><li class="dropdown-subitem"><a href="/pages/74ad69/" class="nav-link">如何保证缓存和数据库双写一致</a></li><li class="dropdown-subitem"><a href="/pages/b931f8/" class="nav-link">redis底层数据结构</a></li><li class="dropdown-subitem"><a href="/pages/154654/" class="nav-link">redis分布式锁</a></li></ul></li><li class="dropdown-item"><h4>Elasticsearch</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0fbad4/" class="nav-link">es基本概念</a></li><li class="dropdown-subitem"><a href="/pages/e67888/" class="nav-link">es基础语法</a></li><li class="dropdown-subitem"><a href="/pages/3cb85c/" class="nav-link">es倒排索引</a></li></ul></li><li class="dropdown-item"><h4>etcd</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a376b5/" class="nav-link">Go操作etcd</a></li><li class="dropdown-subitem"><a href="/pages/2f5a88/" class="nav-link">Raft原理</a></li><li class="dropdown-subitem"><a href="/pages/59288f/" class="nav-link">etcd分布式锁</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="MQ" class="dropdown-title"><a href="/mq/" class="link-title">MQ</a> <span class="title" style="display:none;">MQ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>kafka</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5a722c/" class="nav-link">消息队列MQ总结</a></li><li class="dropdown-subitem"><a href="/pages/dbfcdf/" class="nav-link">kafka 概述及原理</a></li><li class="dropdown-subitem"><a href="/pages/6868ce/" class="nav-link">kafka 消费问题记录</a></li><li class="dropdown-subitem"><a href="/pages/a531a8/" class="nav-link">零拷贝技术</a></li><li class="dropdown-subitem"><a href="/pages/362fa0/" class="nav-link">kafka分区规范</a></li></ul></li><li class="dropdown-item"><h4>RabbitMQ</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d10ce0/" class="nav-link">rabbitMQ基础</a></li><li class="dropdown-subitem"><a href="/pages/6510fb/" class="nav-link">Go操作rabbitmq</a></li></ul></li><li class="dropdown-item"><h4>RocketMQ</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/ea2fe2/" class="nav-link">可靠消息队列 rocketMQ</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络" class="dropdown-title"><a href="/network/" class="link-title">网络</a> <span class="title" style="display:none;">网络</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Http&amp;Https</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a55b80/" class="nav-link">http&amp;https</a></li><li class="dropdown-subitem"><a href="/pages/c87956/" class="nav-link">TCP和UDP</a></li><li class="dropdown-subitem"><a href="/pages/336ace/" class="nav-link">Ping 原理</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="rpc + grpc" class="dropdown-title"><a href="/rpc/" class="link-title">rpc + grpc</a> <span class="title" style="display:none;">rpc + grpc</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>RPC</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d78ab1/" class="nav-link">RPC初识</a></li><li class="dropdown-subitem"><a href="/pages/39b3f2/" class="nav-link">grpc初识和实现</a></li></ul></li><li class="dropdown-item"><h4>gRPC</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/f456b1/" class="nav-link">grpc 初识</a></li><li class="dropdown-subitem"><a href="/pages/56fede/" class="nav-link">grpc 上下文 metadata</a></li><li class="dropdown-subitem"><a href="/pages/c6fb34/" class="nav-link">grpc 健康检查</a></li><li class="dropdown-subitem"><a href="/pages/b8d063/" class="nav-link">grpc keepalive </a></li><li class="dropdown-subitem"><a href="/pages/830741/" class="nav-link">grpc 命名解析</a></li><li class="dropdown-subitem"><a href="/pages/530a4a/" class="nav-link">grpc 中间件&amp;拦截器</a></li><li class="dropdown-subitem"><a href="/pages/394c7e/" class="nav-link">grpc 负载均衡</a></li><li class="dropdown-subitem"><a href="/pages/650bdb/" class="nav-link">grpc 身份认证</a></li><li class="dropdown-subitem"><a href="/pages/a36ea2/" class="nav-link">grpc 超时重试</a></li><li class="dropdown-subitem"><a href="/pages/8c06ef/" class="nav-link">grpc 链路追踪</a></li><li class="dropdown-subitem"><a href="/pages/90f222/" class="nav-link">grpc-gw将gRPC转RESTfu api</a></li><li class="dropdown-subitem"><a href="/pages/6c7800/" class="nav-link">grpc-gw自定义选项</a></li></ul></li><li class="dropdown-item"><h4>protobuf</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/6d0e1f/" class="nav-link">protobuf 进阶</a></li><li class="dropdown-subitem"><a href="/pages/c67f25/" class="nav-link">protobuf 编码原理</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker+k8s" class="dropdown-title"><a href="/container/" class="link-title">Docker+k8s</a> <span class="title" style="display:none;">Docker+k8s</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Docker</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/beebaf/" class="nav-link">Docker基础</a></li><li class="dropdown-subitem"><a href="/pages/878e1e/" class="nav-link">Docker常用命令</a></li><li class="dropdown-subitem"><a href="/pages/4a7961/" class="nav-link">Dockerfile</a></li><li class="dropdown-subitem"><a href="/pages/f2fd44/" class="nav-link">Docker-Compose</a></li><li class="dropdown-subitem"><a href="/pages/4790f4/" class="nav-link">Docker多阶段构建</a></li><li class="dropdown-subitem"><a href="/pages/fc53a6/" class="nav-link">Docker Config 教程</a></li><li class="dropdown-subitem"><a href="/pages/5f8421/" class="nav-link">Docker Swarm 教程</a></li><li class="dropdown-subitem"><a href="/pages/037a8d/" class="nav-link">Docker Stack 教程</a></li><li class="dropdown-subitem"><a href="/pages/c68a8f/" class="nav-link">Docker Buildx 教程</a></li></ul></li><li class="dropdown-item"><h4>k8s</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b305c1/" class="nav-link">k8s 基础概念</a></li><li class="dropdown-subitem"><a href="/pages/27b1f7/" class="nav-link">k8s 集群架构</a></li><li class="dropdown-subitem"><a href="/pages/ca5be0/" class="nav-link">k8s 工作负载</a></li><li class="dropdown-subitem"><a href="/pages/a53d39/" class="nav-link">Pod 网络</a></li><li class="dropdown-subitem"><a href="/pages/a566d2/" class="nav-link">Service 网络</a></li><li class="dropdown-subitem"><a href="/pages/dd652d/" class="nav-link">外部接入网络</a></li><li class="dropdown-subitem"><a href="/pages/75ad55/" class="nav-link">一张图搞懂k8s各种pod</a></li><li class="dropdown-subitem"><a href="/pages/391855/" class="nav-link">k8s 存储抽象</a></li><li class="dropdown-subitem"><a href="/pages/a0c2ed/" class="nav-link">mac快速启动k8s</a></li><li class="dropdown-subitem"><a href="/pages/e721f1/" class="nav-link">自制申威架构k8s-reloader</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><a href="/microsoft/" class="link-title">微服务</a> <span class="title" style="display:none;">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>go-kit</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/57b887/" class="nav-link">go-kit初识</a></li><li class="dropdown-subitem"><a href="/pages/35ad82/" class="nav-link">go-kit启动http服务</a></li><li class="dropdown-subitem"><a href="/pages/1e0688/" class="nav-link">go-kit集成gin启动服务</a></li><li class="dropdown-subitem"><a href="/pages/002b84/" class="nav-link">go-kit集成grpc和protobuf</a></li><li class="dropdown-subitem"><a href="/pages/7bbf4d/" class="nav-link">go-kit中间件</a></li><li class="dropdown-subitem"><a href="/pages/cf9680/" class="nav-link">go-kit服务注册发现与负载均衡</a></li><li class="dropdown-subitem"><a href="/pages/1b849d/" class="nav-link">go-kit限流和熔断</a></li><li class="dropdown-subitem"><a href="/pages/a6777b/" class="nav-link">go-kit链路追踪</a></li><li class="dropdown-subitem"><a href="/pages/ca7cde/" class="nav-link">go-kit集成Prometheus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><a href="/advanced/" class="link-title">数据结构与算法</a> <span class="title" style="display:none;">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>设计模式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d12e59/" class="nav-link">初识设计模式</a></li><li class="dropdown-subitem"><a href="/pages/f8cf01/" class="nav-link">创建型模式</a></li><li class="dropdown-subitem"><a href="/pages/3ed58b/" class="nav-link">结构型模式</a></li><li class="dropdown-subitem"><a href="/pages/ceb2dc/" class="nav-link">行为模式</a></li></ul></li><li class="dropdown-item"><h4>数据结构</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3e7d65/" class="nav-link">时间轮</a></li><li class="dropdown-subitem"><a href="/pages/d280b9/" class="nav-link">堆、双向链表、环形队列</a></li><li class="dropdown-subitem"><a href="/pages/424568/" class="nav-link">队列：优先队列</a></li><li class="dropdown-subitem"><a href="/pages/29dbaf/" class="nav-link">队列：延迟队列</a></li></ul></li><li class="dropdown-item"><h4>算法</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d31137/" class="nav-link">递归算法</a></li><li class="dropdown-subitem"><a href="/pages/cf0f0b/" class="nav-link">枚举算法</a></li><li class="dropdown-subitem"><a href="/pages/202034/" class="nav-link">动态规划</a></li><li class="dropdown-subitem"><a href="/pages/ebd1da/" class="nav-link">回溯算法</a></li><li class="dropdown-subitem"><a href="/pages/eb3da7/" class="nav-link">分治算法</a></li><li class="dropdown-subitem"><a href="/pages/247606/" class="nav-link">贪心算法</a></li><li class="dropdown-subitem"><a href="/pages/59e30c/" class="nav-link">LRU和LFU</a></li><li class="dropdown-subitem"><a href="/pages/2c8648/" class="nav-link">一致性哈希</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/dengxia.gif"> <div class="blogger-info"><h3></h3> <span>花开半夏,半夏花开</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Go" class="dropdown-title"><a href="/go/" class="link-title">Go</a> <span class="title" style="display:none;">Go</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Go语言基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/dfa8c5/" class="nav-link">数据类型</a></li><li class="dropdown-subitem"><a href="/pages/5f1127/" class="nav-link">反射</a></li><li class="dropdown-subitem"><a href="/pages/c49433/" class="nav-link">Go指针</a></li></ul></li><li class="dropdown-item"><h4>Go语言进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/cf7dae/" class="nav-link">go泛型</a></li><li class="dropdown-subitem"><a href="/pages/dedafd/" class="nav-link">go条件编译</a></li><li class="dropdown-subitem"><a href="/pages/efc7ad/" class="nav-link">cgo教程</a></li><li class="dropdown-subitem"><a href="/pages/6bedb1/" class="nav-link">Go协程调度原理及GPM模型</a></li><li class="dropdown-subitem"><a href="/pages/0a62de/" class="nav-link">Go内存管理</a></li><li class="dropdown-subitem"><a href="/pages/241eea/" class="nav-link">Go垃圾回收机制</a></li><li class="dropdown-subitem"><a href="/pages/034686/" class="nav-link">Go语言内存对齐</a></li></ul></li><li class="dropdown-item"><h4>Go语言实现原理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1068be/" class="nav-link">channel 实现原理</a></li><li class="dropdown-subitem"><a href="/pages/99be2b/" class="nav-link">slice 实现原理</a></li><li class="dropdown-subitem"><a href="/pages/d185ed/" class="nav-link">map 实现原理</a></li><li class="dropdown-subitem"><a href="/pages/9ab782/" class="nav-link">sync.Mutex 实现原理</a></li><li class="dropdown-subitem"><a href="/pages/f2d80d/" class="nav-link">乐观锁CAS 实现原理</a></li><li class="dropdown-subitem"><a href="/pages/4f0a6e/" class="nav-link">singlefight 实现原理</a></li></ul></li><li class="dropdown-item"><h4>gin框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/39fbb0/" class="nav-link">gin中间件原理</a></li><li class="dropdown-subitem"><a href="/pages/7e7998/" class="nav-link">gin路由原理</a></li></ul></li><li class="dropdown-item"><h4>gorm</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b1bd04/" class="nav-link">GORM介绍和使用</a></li><li class="dropdown-subitem"><a href="/pages/0f644f/" class="nav-link">GORM_CURD操作指南</a></li></ul></li><li class="dropdown-item"><h4>go测试</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/147dd1/" class="nav-link">benchmark基准测试</a></li><li class="dropdown-subitem"><a href="/pages/d45236/" class="nav-link">pprof 性能分析</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/python/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>python进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3b62b2/" class="nav-link">Numpy&amp;Pandas</a></li><li class="dropdown-subitem"><a href="/pages/cffbfd/" class="nav-link">celery分布式任务队列</a></li></ul></li><li class="dropdown-item"><h4>Django</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3c6d02/" class="nav-link">Django 常见命令</a></li><li class="dropdown-subitem"><a href="/pages/ac3065/" class="nav-link">middleware中间件</a></li><li class="dropdown-subitem"><a href="/pages/f4f9ce/" class="nav-link">Django缓存系统</a></li><li class="dropdown-subitem"><a href="/pages/96c912/" class="nav-link">Django信号系统</a></li><li class="dropdown-subitem"><a href="/pages/a0cd2a/" class="nav-link">Django REST Framework</a></li></ul></li><li class="dropdown-item"><h4>Flask</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/cbe9ba/" class="nav-link">Flask基础知识总结</a></li><li class="dropdown-subitem"><a href="/pages/184ee5/" class="nav-link">Flask-SQLAlchemy</a></li></ul></li><li class="dropdown-item"><h4>爬虫</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5ef8dd/" class="nav-link">aiohttp</a></li><li class="dropdown-subitem"><a href="/pages/e669a5/" class="nav-link">scrapy框架</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/database/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Mysql</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/508485/" class="nav-link">Mysql存储引擎和索引</a></li><li class="dropdown-subitem"><a href="/pages/a65b61/" class="nav-link">MySQL主从复制</a></li><li class="dropdown-subitem"><a href="/pages/10af64/" class="nav-link">Mysql读写分离</a></li><li class="dropdown-subitem"><a href="/pages/64593f/" class="nav-link">数据库分库分表</a></li><li class="dropdown-subitem"><a href="/pages/bfd481/" class="nav-link">Mysql锁</a></li><li class="dropdown-subitem"><a href="/pages/00c19f/" class="nav-link">Mysql事务和MVCC原理</a></li><li class="dropdown-subitem"><a href="/pages/af218c/" class="nav-link">分库分表带来的读扩散问题</a></li></ul></li><li class="dropdown-item"><h4>Redis</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5665df/" class="nav-link">redis基础和数据类型</a></li><li class="dropdown-subitem"><a href="/pages/d17810/" class="nav-link">redis主从架构</a></li><li class="dropdown-subitem"><a href="/pages/c1b6e9/" class="nav-link">redis哨兵架构</a></li><li class="dropdown-subitem"><a href="/pages/b05ef8/" class="nav-link">redis集群模式</a></li><li class="dropdown-subitem"><a href="/pages/74ad69/" class="nav-link">如何保证缓存和数据库双写一致</a></li><li class="dropdown-subitem"><a href="/pages/b931f8/" class="nav-link">redis底层数据结构</a></li><li class="dropdown-subitem"><a href="/pages/154654/" class="nav-link">redis分布式锁</a></li></ul></li><li class="dropdown-item"><h4>Elasticsearch</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0fbad4/" class="nav-link">es基本概念</a></li><li class="dropdown-subitem"><a href="/pages/e67888/" class="nav-link">es基础语法</a></li><li class="dropdown-subitem"><a href="/pages/3cb85c/" class="nav-link">es倒排索引</a></li></ul></li><li class="dropdown-item"><h4>etcd</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a376b5/" class="nav-link">Go操作etcd</a></li><li class="dropdown-subitem"><a href="/pages/2f5a88/" class="nav-link">Raft原理</a></li><li class="dropdown-subitem"><a href="/pages/59288f/" class="nav-link">etcd分布式锁</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="MQ" class="dropdown-title"><a href="/mq/" class="link-title">MQ</a> <span class="title" style="display:none;">MQ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>kafka</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5a722c/" class="nav-link">消息队列MQ总结</a></li><li class="dropdown-subitem"><a href="/pages/dbfcdf/" class="nav-link">kafka 概述及原理</a></li><li class="dropdown-subitem"><a href="/pages/6868ce/" class="nav-link">kafka 消费问题记录</a></li><li class="dropdown-subitem"><a href="/pages/a531a8/" class="nav-link">零拷贝技术</a></li><li class="dropdown-subitem"><a href="/pages/362fa0/" class="nav-link">kafka分区规范</a></li></ul></li><li class="dropdown-item"><h4>RabbitMQ</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d10ce0/" class="nav-link">rabbitMQ基础</a></li><li class="dropdown-subitem"><a href="/pages/6510fb/" class="nav-link">Go操作rabbitmq</a></li></ul></li><li class="dropdown-item"><h4>RocketMQ</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/ea2fe2/" class="nav-link">可靠消息队列 rocketMQ</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络" class="dropdown-title"><a href="/network/" class="link-title">网络</a> <span class="title" style="display:none;">网络</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Http&amp;Https</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a55b80/" class="nav-link">http&amp;https</a></li><li class="dropdown-subitem"><a href="/pages/c87956/" class="nav-link">TCP和UDP</a></li><li class="dropdown-subitem"><a href="/pages/336ace/" class="nav-link">Ping 原理</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="rpc + grpc" class="dropdown-title"><a href="/rpc/" class="link-title">rpc + grpc</a> <span class="title" style="display:none;">rpc + grpc</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>RPC</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d78ab1/" class="nav-link">RPC初识</a></li><li class="dropdown-subitem"><a href="/pages/39b3f2/" class="nav-link">grpc初识和实现</a></li></ul></li><li class="dropdown-item"><h4>gRPC</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/f456b1/" class="nav-link">grpc 初识</a></li><li class="dropdown-subitem"><a href="/pages/56fede/" class="nav-link">grpc 上下文 metadata</a></li><li class="dropdown-subitem"><a href="/pages/c6fb34/" class="nav-link">grpc 健康检查</a></li><li class="dropdown-subitem"><a href="/pages/b8d063/" class="nav-link">grpc keepalive </a></li><li class="dropdown-subitem"><a href="/pages/830741/" class="nav-link">grpc 命名解析</a></li><li class="dropdown-subitem"><a href="/pages/530a4a/" class="nav-link">grpc 中间件&amp;拦截器</a></li><li class="dropdown-subitem"><a href="/pages/394c7e/" class="nav-link">grpc 负载均衡</a></li><li class="dropdown-subitem"><a href="/pages/650bdb/" class="nav-link">grpc 身份认证</a></li><li class="dropdown-subitem"><a href="/pages/a36ea2/" class="nav-link">grpc 超时重试</a></li><li class="dropdown-subitem"><a href="/pages/8c06ef/" class="nav-link">grpc 链路追踪</a></li><li class="dropdown-subitem"><a href="/pages/90f222/" class="nav-link">grpc-gw将gRPC转RESTfu api</a></li><li class="dropdown-subitem"><a href="/pages/6c7800/" class="nav-link">grpc-gw自定义选项</a></li></ul></li><li class="dropdown-item"><h4>protobuf</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/6d0e1f/" class="nav-link">protobuf 进阶</a></li><li class="dropdown-subitem"><a href="/pages/c67f25/" class="nav-link">protobuf 编码原理</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker+k8s" class="dropdown-title"><a href="/container/" class="link-title">Docker+k8s</a> <span class="title" style="display:none;">Docker+k8s</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Docker</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/beebaf/" class="nav-link">Docker基础</a></li><li class="dropdown-subitem"><a href="/pages/878e1e/" class="nav-link">Docker常用命令</a></li><li class="dropdown-subitem"><a href="/pages/4a7961/" class="nav-link">Dockerfile</a></li><li class="dropdown-subitem"><a href="/pages/f2fd44/" class="nav-link">Docker-Compose</a></li><li class="dropdown-subitem"><a href="/pages/4790f4/" class="nav-link">Docker多阶段构建</a></li><li class="dropdown-subitem"><a href="/pages/fc53a6/" class="nav-link">Docker Config 教程</a></li><li class="dropdown-subitem"><a href="/pages/5f8421/" class="nav-link">Docker Swarm 教程</a></li><li class="dropdown-subitem"><a href="/pages/037a8d/" class="nav-link">Docker Stack 教程</a></li><li class="dropdown-subitem"><a href="/pages/c68a8f/" class="nav-link">Docker Buildx 教程</a></li></ul></li><li class="dropdown-item"><h4>k8s</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b305c1/" class="nav-link">k8s 基础概念</a></li><li class="dropdown-subitem"><a href="/pages/27b1f7/" class="nav-link">k8s 集群架构</a></li><li class="dropdown-subitem"><a href="/pages/ca5be0/" class="nav-link">k8s 工作负载</a></li><li class="dropdown-subitem"><a href="/pages/a53d39/" class="nav-link">Pod 网络</a></li><li class="dropdown-subitem"><a href="/pages/a566d2/" class="nav-link">Service 网络</a></li><li class="dropdown-subitem"><a href="/pages/dd652d/" class="nav-link">外部接入网络</a></li><li class="dropdown-subitem"><a href="/pages/75ad55/" class="nav-link">一张图搞懂k8s各种pod</a></li><li class="dropdown-subitem"><a href="/pages/391855/" class="nav-link">k8s 存储抽象</a></li><li class="dropdown-subitem"><a href="/pages/a0c2ed/" class="nav-link">mac快速启动k8s</a></li><li class="dropdown-subitem"><a href="/pages/e721f1/" class="nav-link">自制申威架构k8s-reloader</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><a href="/microsoft/" class="link-title">微服务</a> <span class="title" style="display:none;">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>go-kit</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/57b887/" class="nav-link">go-kit初识</a></li><li class="dropdown-subitem"><a href="/pages/35ad82/" class="nav-link">go-kit启动http服务</a></li><li class="dropdown-subitem"><a href="/pages/1e0688/" class="nav-link">go-kit集成gin启动服务</a></li><li class="dropdown-subitem"><a href="/pages/002b84/" class="nav-link">go-kit集成grpc和protobuf</a></li><li class="dropdown-subitem"><a href="/pages/7bbf4d/" class="nav-link">go-kit中间件</a></li><li class="dropdown-subitem"><a href="/pages/cf9680/" class="nav-link">go-kit服务注册发现与负载均衡</a></li><li class="dropdown-subitem"><a href="/pages/1b849d/" class="nav-link">go-kit限流和熔断</a></li><li class="dropdown-subitem"><a href="/pages/a6777b/" class="nav-link">go-kit链路追踪</a></li><li class="dropdown-subitem"><a href="/pages/ca7cde/" class="nav-link">go-kit集成Prometheus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><a href="/advanced/" class="link-title">数据结构与算法</a> <span class="title" style="display:none;">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>设计模式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d12e59/" class="nav-link">初识设计模式</a></li><li class="dropdown-subitem"><a href="/pages/f8cf01/" class="nav-link">创建型模式</a></li><li class="dropdown-subitem"><a href="/pages/3ed58b/" class="nav-link">结构型模式</a></li><li class="dropdown-subitem"><a href="/pages/ceb2dc/" class="nav-link">行为模式</a></li></ul></li><li class="dropdown-item"><h4>数据结构</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3e7d65/" class="nav-link">时间轮</a></li><li class="dropdown-subitem"><a href="/pages/d280b9/" class="nav-link">堆、双向链表、环形队列</a></li><li class="dropdown-subitem"><a href="/pages/424568/" class="nav-link">队列：优先队列</a></li><li class="dropdown-subitem"><a href="/pages/29dbaf/" class="nav-link">队列：延迟队列</a></li></ul></li><li class="dropdown-item"><h4>算法</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d31137/" class="nav-link">递归算法</a></li><li class="dropdown-subitem"><a href="/pages/cf0f0b/" class="nav-link">枚举算法</a></li><li class="dropdown-subitem"><a href="/pages/202034/" class="nav-link">动态规划</a></li><li class="dropdown-subitem"><a href="/pages/ebd1da/" class="nav-link">回溯算法</a></li><li class="dropdown-subitem"><a href="/pages/eb3da7/" class="nav-link">分治算法</a></li><li class="dropdown-subitem"><a href="/pages/247606/" class="nav-link">贪心算法</a></li><li class="dropdown-subitem"><a href="/pages/59e30c/" class="nav-link">LRU和LFU</a></li><li class="dropdown-subitem"><a href="/pages/2c8648/" class="nav-link">一致性哈希</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python并发编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Django</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/3c6d02/" class="sidebar-link">django 常见命令</a></li><li><a href="/pages/b66150/" class="sidebar-link">Django模板母版</a></li><li><a href="/pages/3eb371/" class="sidebar-link">Django视图</a></li><li><a href="/pages/f03434/" class="sidebar-link">Django路由系统</a></li><li><a href="/pages/aae583/" class="sidebar-link">Django--orm系统-指令&amp;属性</a></li><li><a href="/pages/a23010/" class="sidebar-link">Django--orm系统 -分组聚合</a></li><li><a href="/pages/2191a4/" class="sidebar-link">Django-cookie&amp;session</a></li><li><a href="/pages/ac3065/" class="sidebar-link">middleware中间件</a></li><li><a href="/pages/2115b8/" class="sidebar-link">Django 的身份认证系统</a></li><li><a href="/pages/e11496/" class="sidebar-link">Django models 之字段详解</a></li><li><a href="/pages/f4f9ce/" class="sidebar-link">Django缓存系统</a></li><li><a href="/pages/551654/" class="sidebar-link">Django数据库系统</a></li><li><a href="/pages/96c912/" class="sidebar-link">Django信号系统</a></li><li><a href="/pages/20093c/" class="sidebar-link">Django序列化和反序列化</a></li><li><a href="/pages/a99a08/" class="sidebar-link">Django中admin用法</a></li><li><a href="/pages/65e600/" aria-current="page" class="active sidebar-link">DRF 版本、认证、权限、限制、解析器和渲染器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_1-为什么要有版本控制" class="sidebar-link">1.为什么要有版本控制?</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_2-drf提供的版本控制方案" class="sidebar-link">2.DRF提供的版本控制方案</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_3-版本的使用" class="sidebar-link">3.版本的使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/65e600/#_3-1全局配置" class="sidebar-link">3.1全局配置</a></li><li class="sidebar-sub-header level3"><a href="/pages/65e600/#_3-2局部配置-使用较少" class="sidebar-link">3.2局部配置(使用较少)</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_1-内置的认证" class="sidebar-link">1.内置的认证</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_2-步骤" class="sidebar-link">2.步骤</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_1-自定义一个权限类" class="sidebar-link">1.自定义一个权限类</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_2-权限-局部配置" class="sidebar-link">2.权限 局部配置</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_3-权限-全局配置" class="sidebar-link">3.权限 全局配置</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_1-使用自定义限制类" class="sidebar-link">1.使用自定义限制类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/65e600/#_1-1自定义一个限制类" class="sidebar-link">1.1自定义一个限制类</a></li><li class="sidebar-sub-header level3"><a href="/pages/65e600/#_1-2限制-局部配置" class="sidebar-link">1.2限制 局部配置</a></li><li class="sidebar-sub-header level3"><a href="/pages/65e600/#_1-3限制-全局配置" class="sidebar-link">1.3限制 全局配置</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_2-使用内置限制类" class="sidebar-link">2.使用内置限制类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/65e600/#_2-1定义内置限制类" class="sidebar-link">2.1定义内置限制类</a></li><li class="sidebar-sub-header level3"><a href="/pages/65e600/#_2-2全局配置" class="sidebar-link">2.2全局配置</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_1-为什么要使用分页" class="sidebar-link">1.为什么要使用分页</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_2-drf使用分页器" class="sidebar-link">2.DRF使用分页器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/65e600/#_2-1分页模式" class="sidebar-link">2.1分页模式</a></li><li class="sidebar-sub-header level3"><a href="/pages/65e600/#_2-2全局配置-2" class="sidebar-link">2.2全局配置</a></li><li class="sidebar-sub-header level3"><a href="/pages/65e600/#_2-3局部配置" class="sidebar-link">2.3局部配置</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_3-drf内置分页器" class="sidebar-link">3.DRF内置分页器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/65e600/#_3-1pagenumberpagination" class="sidebar-link">3.1PageNumberPagination</a></li><li class="sidebar-sub-header level4"><a href="/pages/65e600/#分页器" class="sidebar-link">分页器</a></li><li class="sidebar-sub-header level4"><a href="/pages/65e600/#视图" class="sidebar-link">视图</a></li><li class="sidebar-sub-header level3"><a href="/pages/65e600/#_3-2limitoffsetpagination" class="sidebar-link">3.2LimitOffsetPagination</a></li><li class="sidebar-sub-header level4"><a href="/pages/65e600/#分页器-2" class="sidebar-link">分页器</a></li><li class="sidebar-sub-header level4"><a href="/pages/65e600/#视图-2" class="sidebar-link">视图</a></li><li class="sidebar-sub-header level3"><a href="/pages/65e600/#_3-3cursorpagination" class="sidebar-link">3.3CursorPagination</a></li><li class="sidebar-sub-header level4"><a href="/pages/65e600/#分页器-3" class="sidebar-link">分页器</a></li><li class="sidebar-sub-header level4"><a href="/pages/65e600/#视图-3" class="sidebar-link">视图</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_1-查看源码" class="sidebar-link">1.查看源码</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_2-总结" class="sidebar-link">2.总结</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_1-issubset" class="sidebar-link">1.issubset()</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_2-语法糖setter-getter-deleter" class="sidebar-link">2.语法糖setter,getter,deleter</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_3-orm之update-or-create" class="sidebar-link">3.ORM之update_or_create()</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_4-assert断言" class="sidebar-link">4.assert断言</a></li><li class="sidebar-sub-header level2"><a href="/pages/65e600/#_5-while循环测试" class="sidebar-link">5.while循环测试</a></li></ul></li><li><a href="/pages/a0cd2a/" class="sidebar-link">DRF（Django REST Framework）框架</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flask</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>爬虫</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/python/#Python" data-v-06225672>Python</a></li><li data-v-06225672><a href="/python/#Django" data-v-06225672>Django</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://bigox.wiki" target="_blank" title="作者" class="beLink" data-v-06225672>bigox</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2021-03-22</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">DRF 版本、认证、权限、限制、解析器和渲染器<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="一-drf之版本控制"><a href="#一-drf之版本控制" class="header-anchor">#</a> 一.DRF之版本控制</h1> <h2 id="_1-为什么要有版本控制"><a href="#_1-为什么要有版本控制" class="header-anchor">#</a> 1.为什么要有版本控制?</h2> <p>API版本控制允许我们在不同的客户端之间更改行为(同一个接口的不同版本会返回不同的数据). DRF提供了许多不同的版本控制方案.</p> <p>可能会有一些客户端因为某些原因不再维护了, 但是我们后端的接口还要不断的更新迭代, 这个时候通过版本控制返回不同的内容就是一种不错的解决方案.</p> <h2 id="_2-drf提供的版本控制方案"><a href="#_2-drf提供的版本控制方案" class="header-anchor">#</a> 2.DRF提供的版本控制方案</h2> <p>DRF提供了五种版本控制方案, 如下:</p> <p><img src="https://img2018.cnblogs.com/blog/1464512/201901/1464512-20190119214223577-449251934.png" alt="img"></p> <h2 id="_3-版本的使用"><a href="#_3-版本的使用" class="header-anchor">#</a> 3.版本的使用</h2> <h3 id="_3-1全局配置"><a href="#_3-1全局配置" class="header-anchor">#</a> 3.1全局配置</h3> <ol><li><code>settings.py</code>文件中进行全局配置</li></ol> <p>除非明确设置, 否则<code>DEFAULT_VERSIONING_CLASS</code>值为None, 此例中的<code>request.version</code>将会始终返回None.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>REST_FRAMEWORK <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment"># 配置默认使用的版本控制方案: URLPathVersioning</span>
    <span class="token string">'DEFAULT_VERSIONING_CLASS'</span><span class="token punctuation">:</span> <span class="token string">'rest_framework.versioning.URLPathVersioning'</span><span class="token punctuation">,</span>
    <span class="token string">'DEFAULT_VERSION'</span><span class="token punctuation">:</span> <span class="token string">'v1'</span><span class="token punctuation">,</span>  <span class="token comment"># 默认的版本</span>
    <span class="token string">'ALLOWED_VERSIONS'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'v1'</span><span class="token punctuation">,</span> <span class="token string">'v2'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># 有效的版本</span>
    <span class="token string">'VERSION_PARAM'</span><span class="token punctuation">:</span> <span class="token string">'version'</span><span class="token punctuation">,</span>  <span class="token comment"># 版本的参数名与URL conf中一致</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol><li><code>urls.py</code>文件中:</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">from</span> bms <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^admin/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span>

    url<span class="token punctuation">(</span><span class="token string">r'^(?P&lt;version&gt;[v1|v2]+)/book/$'</span><span class="token punctuation">,</span>   <span class="token comment"># 版本的参数名与URL conf中一致</span>
        views<span class="token punctuation">.</span>BookViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span>actions<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'get'</span><span class="token punctuation">:</span> <span class="token string">'list'</span><span class="token punctuation">,</span> <span class="token string">'post'</span><span class="token punctuation">:</span> <span class="token string">'create'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^(?P&lt;version&gt;[v1|v2]+)/book/(?P&lt;pk&gt;\d+)$'</span><span class="token punctuation">,</span>
        views<span class="token punctuation">.</span>BookViewSet<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span>actions<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'get'</span><span class="token punctuation">:</span> <span class="token string">'retrieve'</span><span class="token punctuation">,</span> <span class="token string">'put'</span><span class="token punctuation">:</span> <span class="token string">'update'</span><span class="token punctuation">,</span> <span class="token string">'delete'</span><span class="token punctuation">:</span> <span class="token string">'destroy'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol><li><code>bms/views.py</code>文件中:</li></ol> <p>我们在中可以通过访问<code>request.version</code>来获取当前请求的具体版本, 然后根据不同的版本来返回不同的内容.</p> <ul><li>只要在<code>settings.py</code>中配置了版本信息, 在视图(<code>bms/views.py</code>)中就能通过<code>request.version</code>获取当前版本</li> <li><code>get_serilaizer_class</code>方法可以根据不同版本返回不同的序列化类</li> <li><code>get_queryset</code>方法可以根据不同的版本返回不同的数据控制</li></ul> <p>思考: 为什么可以直接用<code>request.version</code>拿到版本号? --&gt; 这就是我们看源码的目的</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>from bms import models
from bms.modelserializers import BookModelSerializer
from rest_framework.viewsets import ModelViewSet


class BookViewSet(ModelViewSet):
    queryset = models.Book.objects.all()
    serializer_class = BookModelSerializer

    def get_serializer_class(self):
        &quot;&quot;&quot;不同版本 使用不同的序列化类&quot;&quot;&quot;
        if self.request.version == 'v1':
            return BookModelSerializer1
        return self.serializer_class

    def get_queryset(self):
        &quot;&quot;&quot;不同的版本可以 返回不同的数据控制&quot;&quot;&quot;
        if self.request.version == 'v1':
            return models.Book.objects.all()[:3]
        return self.queryset.all()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_3-2局部配置-使用较少"><a href="#_3-2局部配置-使用较少" class="header-anchor">#</a> 3.2局部配置(使用较少)</h3> <p>我们可以在一个单独的视图上设置版本控制方案. 通常, 我们==不需要这样做==, 因为在全局范围内使用一个版本控制方案更有意义. 如果我们确实需要这样做, 请使用<code>versioning_class</code>属性.</p> <ol><li>导入版本控制方案:<code>from rest_framework.versioning import 版本控制方案</code></li> <li><code>versioning_class=版本控制方案</code></li> <li>定义 <code>get_queryset</code>方法 或 <code>get_serializer_class</code>方法</li></ol> <p>==注意==: 版本控制方案有五种</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># AcceptHeaderVersioning
# -- 将版本信息放在请求头中

URLPathVersioning
# -- 将版本信息放在URL中,如: 127.0.0.1:8000/v1/book

NamespaceVersioning
# -- 通过namespace来区分版本

HostNameVersioning
# -- 通过主机名来区分版本

QueryParameterVersioning
# -- 通过URL查询参数来区分版本 如: 127.0.0.1:8000/authors/?version=1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><code>my_app/views.py</code>文件中:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># 第一步
from rest_framework.versioning import URLPathVersioning
class AuthorViewSet(ModelViewSet):
    queryset = models.Author.objects.all()
    serializer_class = AuthorModelSerializer
    
    # 第二步
    versioning_class = URLPathVersioning

    # 第三步
    def get_queryset(self):
        &quot;&quot;&quot;不同的版本可以 返回不同的数据控制量&quot;&quot;&quot;
        pass
    
    # 第三步
    def get_serializer_class(self):
        &quot;&quot;&quot;不同版本 使用不同的序列化类&quot;&quot;&quot;
        pass
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><code>urls.py</code>文件中:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>from django.conf.urls import url
from bms import views
urlpatterns = [
    url(r'^(?P&lt;version&gt;[v1|v2]+)/authors/$',
        views.AuthorViewSet.as_view(actions={'get': 'list', 'post': 'create'})),
    url(r'^(?P&lt;version&gt;[v1|v2]+)/authors/(?P&lt;pk&gt;\d+)$',
        views.AuthorViewSet.as_view(actions={'get': 'retrieve', 'put': 'update', 'delete': 'destroy'})),
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h1 id="二-drf之认证"><a href="#二-drf之认证" class="header-anchor">#</a> 二.DRF之认证</h1> <p>身份验证是将==传入请求==与==一组标识凭据(如请求来自的用户或其签名的令牌)==相关联的机制. 然后 权限 和 限制 组件决定是否拒绝这个请求.</p> <p>简单来说:</p> <ul><li>认证 -- 确定了你是谁</li> <li>权限 -- 确定你能不能访问某个接口</li> <li>限制 -- 确定你访问某个接口的频率</li></ul> <p><strong>认证的目的</strong>: 告诉服务端你是谁</p> <p><strong>思考</strong>: 有个问题, 我们的Django和Vue项目是分离的, 它们很可能是建立在两个不同的服务器上的, 这种前后端分离的情况我们该怎样存cookie和session呢? 对于这种情况, 我们一般是通过Vue发ajax请求来把数据保存到cookie/session中的. 还有一种解决办法, 当前端请求到来时, 前端发送过来一个==token==值给后端, 后端通过查询这个token值(数据库中匹配)就可以确定你是谁了.</p> <p><strong>总结</strong>: 我们通过token值来确定前端来访问的用户是谁.</p> <h2 id="_1-内置的认证"><a href="#_1-内置的认证" class="header-anchor">#</a> 1.内置的认证</h2> <p><img src="https://img2018.cnblogs.com/blog/1464512/201901/1464512-20190119214250229-689042602.png" alt="img"></p> <p><img src="https://img2018.cnblogs.com/blog/1464512/201901/1464512-20190119215142560-1613801912.png" alt="img"></p> <h2 id="_2-步骤"><a href="#_2-步骤" class="header-anchor">#</a> 2.步骤</h2> <p>1.新创建一个app: <code>auth_demo</code></p> <p>2.在<code>settings.py</code>中注册<code>auth_demo</code>这个app</p> <p>3.<code>auth_demo/models.py</code>中的表结构设计:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>from django.db import models

# 用户表
class UserInfo(models.Model):
    name = models.CharField(max_length=32)
    pwd = models.CharField(max_length=32)
    vip = models.BooleanField(default=False)
    token = models.CharField(max_length=128, null=True, blank=True)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>4.二级路由</p> <p>根目录下的<code>urls.py</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>from django.conf.urls import url, include

urlpatterns = [
    url(r'^users/', include('auth_demo.urls')),
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>auth_demo/urls.py</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>from django.conf.urls import url
from auth_demo import views

urlpatterns = [
    url(r'reg/$', views.RegView.as_view()),  # 注册
    url(r'login/$', views.LoginView.as_view()),  # 登录
    url(r'test_auth/$', views.TestAuthView.as_view()),  # 测试登录认证
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>5.视图函数 <code>auth_demo/views.py</code>:</p> <p><code>注册</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>from rest_framework.views import APIView
from rest_framework.response import Response
from auth_demo import models


class RegView(APIView):
    &quot;&quot;&quot;只支持注册用户&quot;&quot;&quot;

    def post(self, request):
        # 1.获取用户注册的数据
        name = request.data.get('name')
        pwd = request.data.get('pwd')
        re_pwd = request.data.get('re_pwd')
        if name and pwd:
            # 2.判断密码和确认密码是否一致
            if pwd == re_pwd:
                # 3.创建用户
                models.UserInfo.objects.create(name=name, pwd=pwd)
                # 4.返回响应
                return Response('注册成功')
            else:
                return Response('两次密码不一致')
        else:
            return Response('无效的参数')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><code>登录</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>class LoginView(APIView):
    &quot;&quot;&quot;只支持用户登录&quot;&quot;&quot;

    def post(self, request):
        # 1.通过request.data获取前端提交的数据
        name = request.data.get('name')
        pwd = request.data.get('pwd')
        if name and pwd:
            # 2.从数据库中进行筛选匹配
            user_obj = models.UserInfo.objects.filter(name=name, pwd=pwd).first()
            if user_obj:
                # 3.登录成功,生成token(时间戳 + Mac地址)
                import uuid
                token = uuid.uuid1().hex
                # 4.把token保存到用户表中
                user_obj.token = token
                user_obj.save()
                # 5.返回响应(包括状态码和token值)
                return Response({'error_no': 0, 'token': token})
            else:
                # 3.用户名或密码错误,登录失败
                return Response({'error_no': 1, 'error': '用户名或密码错误'})
        else:
            return Response('无效的参数')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>6.自定义认证类 <code>auth_demo/auth.py</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>from rest_framework.authentication import BaseAuthentication
from rest_framework.exceptions import AuthenticationFailed
from auth_demo import models


class MyAuth(BaseAuthentication):

    def authenticate(self, request):
        # 1.通过request.query_params获取前端的url参数
        token = request.query_params.get('token')
        if token:
            # 2.如果请求的url中携带了token参数
            user_obj = models.UserInfo.objects.filter(token=token).filter()
            if user_obj:
                # 3.token是有效的
                return user_obj, token  # 必须返回一个元组: (user_obj, token) --&gt; (request.user, request.auth)
            else:
                raise AuthenticationFailed('无效的token')
        else:
            raise AuthenticationFailed('请求的URL中必须携带token参数')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>7.局部认证 配置: <code>auth_demo/views.py</code></p> <p>注意: ==局部配置的优先级高于全局配置==</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>from auth_demo.auth import MyAuth

# 登录之后才能看到的数据接口
class TestAuthView(APIView):
    authentication_classes = [MyAuth, ]  # 配置局部认证, 全局认证在settings.py文件中配置

    def get(self, request):
        print(request.user.name)    # request.user 用户对象
        print(request.auth)         # reequest.auth 设置的token值
        return Response('这个视图里面的数据只有登录以后才能看到!')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>8.全局配置: <code>settings.py</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': ['auth_demo.auth.MyAuth', ],  # 认证 全局配置
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h1 id="三-drf之权限"><a href="#三-drf之权限" class="header-anchor">#</a> 三.DRF之权限</h1> <h2 id="_1-自定义一个权限类"><a href="#_1-自定义一个权限类" class="header-anchor">#</a> 1.自定义一个权限类</h2> <p><code>auth_demo/permissions.py</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;&quot;&quot;
自定义一个权限组件
&quot;&quot;&quot;
from rest_framework.permissions import BasePermission
class MyPermission(BasePermission): # 继承BasePermission
    message = '只有VIP才能访问'

    def has_permission(self, request, view):    # 必须实现has_permission方法
        # 只有通过权限验证的用户才能访问has_permission方法
        if not request.auth:    # request.auth --&gt; token值
            return False
        # request.user --&gt; 当前通过token认证的用户(UserInfo表中的用户对象)
        if request.user.vip:
            # 是VIP就通过
            return True
        else:
            # 不是VIP就拒绝
            return False
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_2-权限-局部配置"><a href="#_2-权限-局部配置" class="header-anchor">#</a> 2.权限 局部配置</h2> <p><code>auth_demo/views.py</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>from auth_demo.auth import MyAuth
from auth_demo.permissions import MyPermission


# 登录之后才能看到的数据接口
class TestAuthView(APIView):
    authentication_classes = [MyAuth, ]  # 配置局部认证, 全局认证在settings.py文件中配置
    permission_classes = [MyPermission, ]   # 配置局部权限, 全局权限在settings.py文件中配置

    def get(self, request):
        print(request.user.name)
        print(request.auth)
        return Response('这个视图里面的数据只有登录以后才能看到!')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_3-权限-全局配置"><a href="#_3-权限-全局配置" class="header-anchor">#</a> 3.权限 全局配置</h2> <p><code>settings.py</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': ['auth_demo.auth.MyAuth', ],
    'DEFAULT_PERMISSION_CLASSES': ['auth_demo.permissions.MyPermission', ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h1 id="四-drf之限制"><a href="#四-drf之限制" class="header-anchor">#</a> 四.DRF之限制</h1> <h2 id="_1-使用自定义限制类"><a href="#_1-使用自定义限制类" class="header-anchor">#</a> 1.使用自定义限制类</h2> <p>DRF内置了基本的限制类，首先我们自己动手写一个限制类，熟悉下限制组件的执行过程。</p> <h3 id="_1-1自定义一个限制类"><a href="#_1-1自定义一个限制类" class="header-anchor">#</a> 1.1自定义一个限制类</h3> <p><code>auth_demo/throttle.py</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import time

# 访问记录
VISIT_RECORD = {}
class MyThrottle(object):

    def __init__(self):
        self.history = None

    def allow_request(self, request, view):
        # 1.拿到当前请求的ip作为VISIT_RECORD的key
        ip = request.META.get('REMOTE_ADDR')
        # 2.拿到当前请求的时间戳
        now = time.time()
        # 3.如果是请求是第一次来访问
        if ip not in VISIT_RECORD:
            # {ip:[]}
            VISIT_RECORD[ip] = []
            return True
        # 4.把当前请求的访问记录拿出来保存到一个变量(访问历史)中
        history = VISIT_RECORD[ip]
        self.history = history
        # 5.循环访问历史,把超过10秒钟的请求时间去掉
        while history and now - history[-1] &gt; 10:
            history.pop()
        # 6.此时,history中只保存了最近10秒钟的访问记录
        if len(history) &gt;= 3:
            # (1)history中存放了3条及以上的历史记录,拒绝访问
            return False
        else:
            # (2)history中的历史记录不到3条,存储当前历史记录
            self.history.insert(0, now)
            return True

    def wait(self):
        &quot;&quot;&quot;告诉客户端还需要等待多久&quot;&quot;&quot;
        now = time.time()
        return self.history[-1] + 10 - now
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h3 id="_1-2限制-局部配置"><a href="#_1-2限制-局部配置" class="header-anchor">#</a> 1.2限制 局部配置</h3> <p><code>auth_demo/views.py</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>from auth_demo.throttle import MyThrottle


# 登录之后才能看到的数据接口
class TestView(APIView):
    throttle_classes = [MyThrottle, ]  # 配置局部限制, 全局限制在settings.py文件中配置

    def get(self, request):
        return Response('你成功了!这个视图里面的数据只有登录以后才能看到!')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_1-3限制-全局配置"><a href="#_1-3限制-全局配置" class="header-anchor">#</a> 1.3限制 全局配置</h3> <p><code>settings.py</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># 在settings.py中设置rest framework相关配置项
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': ['auth_demo.auth.MyAuth', ],  # 认证 全局配置
    'DEFAULT_PERMISSION_CLASSES': ['auth_demo.permissions.MyPermission', ],  # 权限 全局配置
    'DEFAULT_THROTTLE_CLASSES': ['auth_demo.throttle.MyThrottle'],  # 限制 全局配置
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_2-使用内置限制类"><a href="#_2-使用内置限制类" class="header-anchor">#</a> 2.使用内置限制类</h2> <h3 id="_2-1定义内置限制类"><a href="#_2-1定义内置限制类" class="header-anchor">#</a> 2.1定义内置限制类</h3> <p><code>auth_demo/throttle.py</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#使用内置限制类

from rest_framework.throttling import SimpleRateThrottle
class VisitThrottle(SimpleRateThrottle):
    scope = &quot;throttle&quot;

    def get_cache_key(self, request, view):
        return self.get_ident(request)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-2全局配置"><a href="#_2-2全局配置" class="header-anchor">#</a> 2.2全局配置</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>REST_FRAMEWORK = {
    # 内置限制类的全局配置
    &quot;DEFAULT_THROTTLE_RATES&quot;: {
        &quot;throttle&quot;: &quot;5/m&quot;,  # 这里的key要与throttle.py文件中的scope=&quot;throttle&quot;相对应
    },
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h1 id="五-drf之分页"><a href="#五-drf之分页" class="header-anchor">#</a> 五.DRF之分页</h1> <h2 id="_1-为什么要使用分页"><a href="#_1-为什么要使用分页" class="header-anchor">#</a> 1.为什么要使用分页</h2> <p>我们的数据表中可能会有成千上万条数据, 当我们访问某张表的所有数据时,我们不大可能需要一次把所有数据都展示出来, 因为数据量很大, 对服务端的内存压力比较大并且网络传输过程中耗时也会比较大.</p> <p>通常我们会希望一部分一部分去请求数据, 也就是我们常说的一页一页获取数据并展示出来.</p> <h2 id="_2-drf使用分页器"><a href="#_2-drf使用分页器" class="header-anchor">#</a> 2.DRF使用分页器</h2> <h3 id="_2-1分页模式"><a href="#_2-1分页模式" class="header-anchor">#</a> 2.1分页模式</h3> <p>REST framework中提供了三种分页模式:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>from rest_framework.pagination import PageNumberPagination, LimitOffsetPagination, CursorPagination
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-2全局配置-2"><a href="#_2-2全局配置-2" class="header-anchor">#</a> 2.2全局配置</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>REST_FRAMEWORK = {
    # 默认使用的分页类
    'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.PageNumberPagination',
    # 默认每页的数据个数
    'PAGE_SIZE': 100
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2-3局部配置"><a href="#_2-3局部配置" class="header-anchor">#</a> 2.3局部配置</h3> <p>我们可以在视图类中进行局部配置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>class PublisherViewSet(ModelViewSet):
    queryset = models.Publisher.objects.all()
    serializer_class = PublisherModelSerializer
    pagination_class = PageNumberPagination  # 注意不是列表（只能有一个分页模式）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_3-drf内置分页器"><a href="#_3-drf内置分页器" class="header-anchor">#</a> 3.DRF内置分页器</h2> <h3 id="_3-1pagenumberpagination"><a href="#_3-1pagenumberpagination" class="header-anchor">#</a> 3.1<code>PageNumberPagination</code></h3> <p>按页码数分页, 第n页, 每页显示m条数据.</p> <p>例如: <code>http:127.0.0.1:8000/v1/book/?page=2&amp;size=1</code></p> <h4 id="分页器"><a href="#分页器" class="header-anchor">#</a> 分页器</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code># bms/pagination.py

from rest_framework.pagination import PageNumberPagination
class MyPageNumber(PageNumberPagination):
    page_size = 2  # 每页显示多少条
    page_size_query_param = 'size'  # URL中每页显示条数的参数
    page_query_param = 'page'  # URL中页码的参数
    max_page_size = None  # 最大页码数限制
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="视图"><a href="#视图" class="header-anchor">#</a> 视图</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code># bms/views.py

from bms.pagination import MyPageNumber
class BookViewSet(ModelViewSet):
    queryset = models.Book.objects.all().order_by('id')
    serializer_class = BookModelSerializer
    &quot;&quot;&quot;
    普通分页器
    &quot;&quot;&quot;
    pagination_class = MyPageNumber
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-2limitoffsetpagination"><a href="#_3-2limitoffsetpagination" class="header-anchor">#</a> 3.2<code>LimitOffsetPagination</code></h3> <p>分页, 在n位置, 向后查看m条数据.</p> <p>例如: <code>127.0.0.1:8000/v1/book/?offset=2&amp;limit=2</code></p> <h4 id="分页器-2"><a href="#分页器-2" class="header-anchor">#</a> 分页器</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code># bms/pagination.py

from rest_framework.pagination import LimitOffsetPagination
class MyLimitOffset(LimitOffsetPagination):
    default_limit = 1
    limit_query_param = 'limit'
    offset_query_param = 'offset'
    max_limit = 999
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="视图-2"><a href="#视图-2" class="header-anchor">#</a> 视图</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code># bms/views.py

from bms.pagination import MyLimitOffset
class BookViewSet(ModelViewSet):
    queryset = models.Book.objects.all().order_by('id')
    serializer_class = BookModelSerializer
    &quot;&quot;&quot;
    offset分页器
    &quot;&quot;&quot;
    pagination_class = MyLimitOffset
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-3cursorpagination"><a href="#_3-3cursorpagination" class="header-anchor">#</a> 3.3<code>CursorPagination</code></h3> <p>加密分页, 把上一页和下一页的id值记住.</p> <h4 id="分页器-3"><a href="#分页器-3" class="header-anchor">#</a> 分页器</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code># bms/pagination.py

from rest_framework.pagination import CursorPagination
class MyCursorPagination(CursorPagination):
    cursor_query_param = 'cursor'
    page_size = 1
    ordering = '-id'  # 重写要排序的字段
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="视图-3"><a href="#视图-3" class="header-anchor">#</a> 视图</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code># bms/views.py

from bms.pagination import MyCursorPagination
class BookViewSet(ModelViewSet):
    queryset = models.Book.objects.all().order_by('id')
    serializer_class = BookModelSerializer
    &quot;&quot;&quot;
    加密分页器
    &quot;&quot;&quot;
    pagination_class = MyCursorPagination
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h1 id="六-解析器和渲染器"><a href="#六-解析器和渲染器" class="header-anchor">#</a> 六.解析器和渲染器</h1> <p><a href="https://www.cnblogs.com/liwenzhou/p/10267985.html" target="_blank" rel="noopener noreferrer">参考资料<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>略.</p> <h1 id="七-对drf中的request对象的相关总结"><a href="#七-对drf中的request对象的相关总结" class="header-anchor">#</a> 七.对DRF中的<code>request</code>对象的相关总结</h1> <h2 id="_1-查看源码"><a href="#_1-查看源码" class="header-anchor">#</a> 1.查看源码</h2> <p>1.<code>APIView</code>类</p> <p><img src="https://img2018.cnblogs.com/blog/1464512/201901/1464512-20190119214640919-984109625.png" alt="img"></p> <p>2.1.1<code>initialize_request</code>方法</p> <p><img src="https://img2018.cnblogs.com/blog/1464512/201901/1464512-20190119214443267-1195601520.png" alt="img"></p> <p>2.1.2<code>Request</code>类</p> <p><img src="https://img2018.cnblogs.com/blog/1464512/201901/1464512-20190119214507609-1850572750.png" alt="img"></p> <p>2.2.1<code>initial</code>方法</p> <p><img src="https://img2018.cnblogs.com/blog/1464512/201901/1464512-20190119214517143-215536463.png" alt="img"></p> <h2 id="_2-总结"><a href="#_2-总结" class="header-anchor">#</a> 2.总结</h2> <ul><li><code>request.data</code> -- 前端post提交的数据</li> <li><code>request.query_params</code> -- 前端页面的url参数</li> <li><code>request.user</code> -- 通过认证的用户对象</li> <li><code>request.auth</code> -- 前端发过来的token值</li> <li><code>request.version</code> -- 版本号(如: v1, v2)</li> <li><code>requst.versioning_scheme</code> -- 版本控制方案(5个)</li></ul> <h1 id="八-版本-认证-权限-限制-分页-源码查看方法"><a href="#八-版本-认证-权限-限制-分页-源码查看方法" class="header-anchor">#</a> 八.版本,认证,权限,限制,分页 -- 源码查看方法</h1> <div class="language- line-numbers-mode"><pre class="language-text"><code>from rest_framework.versioning import *      # 查看 版本 源码
from rest_framework.authentication import *  # 查看 认证 源码
from rest_framework.permissions import *     # 查看 权限 源码
from rest_framework.throttling import *      # 查看 限制 源码
from rest_framework.pagination import *      # 查看 分页 源码

from django.core.handlers.wsgi import WSGIRequest   # 查看Django自己的request 源码

from rest_framework import settings # 查看settings.py文件中的配置项(版本,认证,权限,等等)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h1 id="九-补充知识"><a href="#九-补充知识" class="header-anchor">#</a> 九.补充知识</h1> <h2 id="_1-issubset"><a href="#_1-issubset" class="header-anchor">#</a> 1.<code>issubset()</code></h2> <p><strong>描述:</strong> <code>issubset()</code>方法用于判断集合的所有元素是否都包含在指定集合中, 如果是则返回True, 否则返回False.</p> <p><strong>语法:</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>set.issubset(set)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>参数:</strong></p> <ul><li><code>set</code> -- 必需, 要比较查找的集合</li></ul> <p><strong>返回值:</strong> 返回布尔值, 如果都包含返回True, 否则返回False.</p> <p><strong>实例说明:</strong> 判断集合x的所有元素是否都包含在集合u中.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>x = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;}
y = {&quot;f&quot;, &quot;e&quot;, &quot;d&quot;, &quot;c&quot;, &quot;b&quot;, &quot;a&quot;}
z = x.issubset(y)
print(z)

# 执行结果:
# True
x = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;}
y = {&quot;f&quot;, &quot;e&quot;, &quot;d&quot;, &quot;c&quot;, &quot;b&quot;}
z = x.issubset(y)
print(z)

# 执行结果:
# False
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_2-语法糖setter-getter-deleter"><a href="#_2-语法糖setter-getter-deleter" class="header-anchor">#</a> 2.语法糖<code>setter</code>,<code>getter</code>,<code>deleter</code></h2> <p><strong>实例说明:</strong></p> <ul><li>例1:</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>class Person:
    def __init__(self, name):
        self.name = name

p1 = Person('王乃卉')
print(p1.name)

# 执行结果:
# 王乃卉
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>例2:</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>class Person:

    def __init__(self, name):
        self.name = name

    @property   # getter -- 获取属性
    def age(self):
        print('get age called')
        return self._age

    @age.setter # setter -- 设置属性
    def age(self, value):
        print('set age called')
        if not isinstance(value, int):
            raise TypeError('Excepted an int')
        self._age = value


p2 = Person('王力宏')  # 实例化
p2.age = 19     # 设置属性
print(p2.age)   # 获取属性

##执行结果:
# set age called
# get age called
# 19
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ul><li>例3:</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>class Person:

    def __init__(self, age):
        self.age = age

    @property   # getter -- 获取属性
    def age(self):
        print('get age called')
        return self._age

    @age.setter # setter -- 设置属性
    def age(self, value):
        print('set age called')
        if not isinstance(value, int):
            raise TypeError('Excepted an int')
        self._age = value


p3 = Person(19)     # 实例化,设置属性
print(p3.age)       # 获取属性

p3.age = 22         # 设置属性
print(p3.age)       # 获取属性

##执行结果:
# set age called
# get age called
# 19
# set age called
# get age called
# 22
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><ul><li>例4:</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>class Person:
    def __init__(self):
        self.__name = None

    @property       # 访问属性
    def name(self):
        return self.__name

    @name.setter    # 设置属性
    def name(self, value):
        self.__name = value

    @name.deleter   # 删除属性
    def name(self):
        del self.__name

p = Person()
print(p.name)     # 访问属性 --&gt; None
p.name = '王乃卉'  # 设置属性
print(p.name)     # 访问属性 --&gt; 王乃卉
del p.name        # 删除属性
#print(p.name)    # 访问属性 --&gt; 报错: 对象没有该属性
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_3-orm之update-or-create"><a href="#_3-orm之update-or-create" class="header-anchor">#</a> 3.ORM之<code>update_or_create()</code></h2> <div class="language- line-numbers-mode"><pre class="language-text"><code># 检查是否有这条记录,有则更新(需要defaults参数,字典类型),无则新增
models.UserToken.objects.update_or_create(user=user_obj, defaults={
    &quot;token&quot;: access_token
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_4-assert断言"><a href="#_4-assert断言" class="header-anchor">#</a> 4.<code>assert</code>断言</h2> <p>根据<a href="https://docs.python.org/3/reference/simple_stmts.html#assert" target="_blank" rel="noopener noreferrer">Python 官方文档解释<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> : <code>&quot;Assert statements are a convenient way to insert debugging assertions into a program&quot;.</code></p> <p>语法:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>assert condition
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>用来让程序测试这个<code>condition</code>, 如果<code>condition</code>为False, 则raise一个<code>AssertionError</code>出来. 逻辑上等同于:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>if not condition:
    raise AssertionError('error_message')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>实例说明:</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt;&gt;&gt; assert 1==1
&gt;&gt;&gt; assert 1==0
Traceback (most recent call last):
  File &quot;&lt;input&gt;&quot;, line 1, in &lt;module&gt;
AssertionError

&gt;&gt;&gt; assert True
&gt;&gt;&gt; assert False
Traceback (most recent call last):
  File &quot;&lt;input&gt;&quot;, line 1, in &lt;module&gt;
AssertionError

&gt;&gt;&gt; assert 1&lt;2
&gt;&gt;&gt; assert 1&gt;2
Traceback (most recent call last):
  File &quot;&lt;input&gt;&quot;, line 1, in &lt;module&gt;
AssertionError
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_5-while循环测试"><a href="#_5-while循环测试" class="header-anchor">#</a> 5.while循环测试</h2> <p>对比以下两个例子并思考为什么执行结果会不同.</p> <ul><li>例1:</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>lst1 = []
while lst1[-1] and lst1:
    print('这里是lst1')

# 执行结果:
# IndexError: list index out of range
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>例2:</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>lst2 = []
while lst2 and lst2[-1]:
    print('这里是lst2')

# 由于lst2为空,所以不执行while循环
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></div>  <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Python" title="标签">#Python</a><a href="/tags/?tag=null" title="标签">#</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/04/16, 18:35:33</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/a99a08/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Django中admin用法</div></a> <a href="/pages/a0cd2a/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">DRF（Django REST Framework）框架</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
          ←
          <a href="/pages/a99a08/" class="prev">Django中admin用法</a></span> <span class="next"><a href="/pages/a0cd2a/">DRF（Django REST Framework）框架</a>→
        </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/523574/"><div>
              go与http代理
              <!----></div></a> <span class="date">05-24</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/e721f1/"><div>
              自制申威架构k8s-reloader
              <!----></div></a> <span class="date">12-06</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/c68a8f/"><div>
              Docker Buildx 教程
              <!----></div></a> <span class="date">12-01</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:big_ox@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/hellolib" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
    Theme by
    <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
      | Copyright © 2020-2024
      <span>小刘扎扎 | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
            跟随系统
          </li><li class="iconfont icon-rijianmoshi">
            浅色模式
          </li><li class="iconfont icon-yejianmoshi">
            深色模式
          </li><li class="iconfont icon-yuedu">
            阅读模式
          </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div><div></div></div></div>
    <script src="/assets/js/app.a4b4c4d6.js" defer></script><script src="/assets/js/2.175b47d8.js" defer></script><script src="/assets/js/146.73948f4b.js" defer></script><script src="/assets/js/6.a6a5cbc6.js" defer></script>
  </body>
</html>
